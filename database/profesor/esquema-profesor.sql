-- ==================================================================
-- DROPS - LIMPIAR BASE DE DATOS
-- ==================================================================

BEGIN
    -- Tablas (orden inverso por dependencias)
    BEGIN EXECUTE IMMEDIATE 'DROP TABLE EVALUACIONES_DESEMPENO CASCADE CONSTRAINTS'; EXCEPTION WHEN OTHERS THEN NULL; END;
    BEGIN EXECUTE IMMEDIATE 'DROP TABLE TAREAS_PERSONAL CASCADE CONSTRAINTS'; EXCEPTION WHEN OTHERS THEN NULL; END;
    BEGIN EXECUTE IMMEDIATE 'DROP TABLE PERSONAL_PROYECTOS CASCADE CONSTRAINTS'; EXCEPTION WHEN OTHERS THEN NULL; END;
    BEGIN EXECUTE IMMEDIATE 'DROP TABLE EXPERIENCIA_LABORAL CASCADE CONSTRAINTS'; EXCEPTION WHEN OTHERS THEN NULL; END;
    BEGIN EXECUTE IMMEDIATE 'DROP TABLE GRADOS_ACADEMICOS CASCADE CONSTRAINTS'; EXCEPTION WHEN OTHERS THEN NULL; END;
    BEGIN EXECUTE IMMEDIATE 'DROP TABLE ESPECIALIDADES_PERSONAL CASCADE CONSTRAINTS'; EXCEPTION WHEN OTHERS THEN NULL; END;
    BEGIN EXECUTE IMMEDIATE 'DROP TABLE CARGOS_AREAS CASCADE CONSTRAINTS'; EXCEPTION WHEN OTHERS THEN NULL; END;
    BEGIN EXECUTE IMMEDIATE 'DROP TABLE DOCUMENTOS_PROVEEDOR CASCADE CONSTRAINTS'; EXCEPTION WHEN OTHERS THEN NULL; END;
    BEGIN EXECUTE IMMEDIATE 'DROP TABLE ACTIVIDADES_PROVEEDOR CASCADE CONSTRAINTS'; EXCEPTION WHEN OTHERS THEN NULL; END;
    BEGIN EXECUTE IMMEDIATE 'DROP TABLE CONTRATOS_PROVEEDOR CASCADE CONSTRAINTS'; EXCEPTION WHEN OTHERS THEN NULL; END;
    BEGIN EXECUTE IMMEDIATE 'DROP TABLE SERVICIOS_PROVEEDOR CASCADE CONSTRAINTS'; EXCEPTION WHEN OTHERS THEN NULL; END;
    BEGIN EXECUTE IMMEDIATE 'DROP TABLE COMP_PAGOCAB CASCADE CONSTRAINTS'; EXCEPTION WHEN OTHERS THEN NULL; END;
    BEGIN EXECUTE IMMEDIATE 'DROP TABLE COMP_PAGOEMPLEADO CASCADE CONSTRAINTS'; EXCEPTION WHEN OTHERS THEN NULL; END;
    BEGIN EXECUTE IMMEDIATE 'DROP TABLE PROYECTO CASCADE CONSTRAINTS'; EXCEPTION WHEN OTHERS THEN NULL; END;
    BEGIN EXECUTE IMMEDIATE 'DROP TABLE EMPLEADO CASCADE CONSTRAINTS'; EXCEPTION WHEN OTHERS THEN NULL; END;
    BEGIN EXECUTE IMMEDIATE 'DROP TABLE PROVEEDOR CASCADE CONSTRAINTS'; EXCEPTION WHEN OTHERS THEN NULL; END;
    BEGIN EXECUTE IMMEDIATE 'DROP TABLE CLIENTE CASCADE CONSTRAINTS'; EXCEPTION WHEN OTHERS THEN NULL; END;
    BEGIN EXECUTE IMMEDIATE 'DROP TABLE PERSONA CASCADE CONSTRAINTS'; EXCEPTION WHEN OTHERS THEN NULL; END;
    BEGIN EXECUTE IMMEDIATE 'DROP TABLE ELEMENTOS CASCADE CONSTRAINTS'; EXCEPTION WHEN OTHERS THEN NULL; END;
    BEGIN EXECUTE IMMEDIATE 'DROP TABLE TABS CASCADE CONSTRAINTS'; EXCEPTION WHEN OTHERS THEN NULL; END;
    BEGIN EXECUTE IMMEDIATE 'DROP TABLE AREAS CASCADE CONSTRAINTS'; EXCEPTION WHEN OTHERS THEN NULL; END;
    BEGIN EXECUTE IMMEDIATE 'DROP TABLE USUARIOS CASCADE CONSTRAINTS'; EXCEPTION WHEN OTHERS THEN NULL; END;
    BEGIN EXECUTE IMMEDIATE 'DROP TABLE CIA CASCADE CONSTRAINTS'; EXCEPTION WHEN OTHERS THEN NULL; END;
    
    -- Secuencias
    BEGIN EXECUTE IMMEDIATE 'DROP SEQUENCE SEC_CIA'; EXCEPTION WHEN OTHERS THEN NULL; END;
    BEGIN EXECUTE IMMEDIATE 'DROP SEQUENCE SEC_PERSONA'; EXCEPTION WHEN OTHERS THEN NULL; END;
    BEGIN EXECUTE IMMEDIATE 'DROP SEQUENCE SEC_PROYECTO'; EXCEPTION WHEN OTHERS THEN NULL; END;
    BEGIN EXECUTE IMMEDIATE 'DROP SEQUENCE SEC_TABS'; EXCEPTION WHEN OTHERS THEN NULL; END;
    BEGIN EXECUTE IMMEDIATE 'DROP SEQUENCE SEC_USUARIOS'; EXCEPTION WHEN OTHERS THEN NULL; END;
    BEGIN EXECUTE IMMEDIATE 'DROP SEQUENCE SEC_AREAS'; EXCEPTION WHEN OTHERS THEN NULL; END;
    BEGIN EXECUTE IMMEDIATE 'DROP SEQUENCE SEC_ESPECIALIDADES'; EXCEPTION WHEN OTHERS THEN NULL; END;
    BEGIN EXECUTE IMMEDIATE 'DROP SEQUENCE SEC_GRADOS'; EXCEPTION WHEN OTHERS THEN NULL; END;
    BEGIN EXECUTE IMMEDIATE 'DROP SEQUENCE SEC_EXPERIENCIA'; EXCEPTION WHEN OTHERS THEN NULL; END;
    BEGIN EXECUTE IMMEDIATE 'DROP SEQUENCE SEC_PERSONAL_PROYECTOS'; EXCEPTION WHEN OTHERS THEN NULL; END;
    BEGIN EXECUTE IMMEDIATE 'DROP SEQUENCE SEC_TAREAS'; EXCEPTION WHEN OTHERS THEN NULL; END;
    BEGIN EXECUTE IMMEDIATE 'DROP SEQUENCE SEC_EVALUACIONES'; EXCEPTION WHEN OTHERS THEN NULL; END;
    BEGIN EXECUTE IMMEDIATE 'DROP SEQUENCE SEC_CARGOS'; EXCEPTION WHEN OTHERS THEN NULL; END;
    BEGIN EXECUTE IMMEDIATE 'DROP SEQUENCE SEC_SERVICIOS'; EXCEPTION WHEN OTHERS THEN NULL; END;
    BEGIN EXECUTE IMMEDIATE 'DROP SEQUENCE SEC_CONTRATOS'; EXCEPTION WHEN OTHERS THEN NULL; END;
    BEGIN EXECUTE IMMEDIATE 'DROP SEQUENCE SEC_ACTIVIDADES'; EXCEPTION WHEN OTHERS THEN NULL; END;
    BEGIN EXECUTE IMMEDIATE 'DROP SEQUENCE SEC_DOCUMENTOS'; EXCEPTION WHEN OTHERS THEN NULL; END;
    
    -- Procedimientos
    BEGIN EXECUTE IMMEDIATE 'DROP PROCEDURE INSERTAR_CIA'; EXCEPTION WHEN OTHERS THEN NULL; END;
    BEGIN EXECUTE IMMEDIATE 'DROP PROCEDURE INSERTAR_EMPLEADO'; EXCEPTION WHEN OTHERS THEN NULL; END;
    BEGIN EXECUTE IMMEDIATE 'DROP PROCEDURE INSERTAR_CLIENTE'; EXCEPTION WHEN OTHERS THEN NULL; END;
    BEGIN EXECUTE IMMEDIATE 'DROP PROCEDURE INSERTAR_PROVEEDOR'; EXCEPTION WHEN OTHERS THEN NULL; END;
    BEGIN EXECUTE IMMEDIATE 'DROP PROCEDURE INSERTAR_PROYECTO'; EXCEPTION WHEN OTHERS THEN NULL; END;
    BEGIN EXECUTE IMMEDIATE 'DROP PROCEDURE INSERTAR_USUARIO'; EXCEPTION WHEN OTHERS THEN NULL; END;
    BEGIN EXECUTE IMMEDIATE 'DROP PROCEDURE INSERTAR_AREA'; EXCEPTION WHEN OTHERS THEN NULL; END;
    BEGIN EXECUTE IMMEDIATE 'DROP PROCEDURE INSERTAR_CARGO'; EXCEPTION WHEN OTHERS THEN NULL; END;
    BEGIN EXECUTE IMMEDIATE 'DROP PROCEDURE INSERTAR_ESPECIALIDAD'; EXCEPTION WHEN OTHERS THEN NULL; END;
    BEGIN EXECUTE IMMEDIATE 'DROP PROCEDURE INSERTAR_GRADO'; EXCEPTION WHEN OTHERS THEN NULL; END;
    BEGIN EXECUTE IMMEDIATE 'DROP PROCEDURE INSERTAR_EXPERIENCIA'; EXCEPTION WHEN OTHERS THEN NULL; END;
    BEGIN EXECUTE IMMEDIATE 'DROP PROCEDURE INSERTAR_PERSONAL_PROYECTO'; EXCEPTION WHEN OTHERS THEN NULL; END;
    BEGIN EXECUTE IMMEDIATE 'DROP PROCEDURE INSERTAR_TAREA'; EXCEPTION WHEN OTHERS THEN NULL; END;
    BEGIN EXECUTE IMMEDIATE 'DROP PROCEDURE INSERTAR_EVALUACION'; EXCEPTION WHEN OTHERS THEN NULL; END;
    BEGIN EXECUTE IMMEDIATE 'DROP PROCEDURE INSERTAR_SERVICIO'; EXCEPTION WHEN OTHERS THEN NULL; END;
    BEGIN EXECUTE IMMEDIATE 'DROP PROCEDURE INSERTAR_CONTRATO'; EXCEPTION WHEN OTHERS THEN NULL; END;
    BEGIN EXECUTE IMMEDIATE 'DROP PROCEDURE INSERTAR_ACTIVIDAD'; EXCEPTION WHEN OTHERS THEN NULL; END;
    BEGIN EXECUTE IMMEDIATE 'DROP PROCEDURE INSERTAR_DOCUMENTO'; EXCEPTION WHEN OTHERS THEN NULL; END;
    BEGIN EXECUTE IMMEDIATE 'DROP PROCEDURE INSERTAR_COMPROBANTE_PROVEEDOR'; EXCEPTION WHEN OTHERS THEN NULL; END;
    BEGIN EXECUTE IMMEDIATE 'DROP PROCEDURE INSERTAR_COMPROBANTE_EMPLEADO'; EXCEPTION WHEN OTHERS THEN NULL; END;
    BEGIN EXECUTE IMMEDIATE 'DROP PROCEDURE INSERTAR_TABS'; EXCEPTION WHEN OTHERS THEN NULL; END;
    BEGIN EXECUTE IMMEDIATE 'DROP PROCEDURE INSERTAR_ELEMENTOS'; EXCEPTION WHEN OTHERS THEN NULL; END;

    -- Funciones
    BEGIN EXECUTE IMMEDIATE 'DROP FUNCTION DURACION_PROYECTO'; EXCEPTION WHEN OTHERS THEN NULL; END;
    BEGIN EXECUTE IMMEDIATE 'DROP FUNCTION GET_PERSONA_TIPO'; EXCEPTION WHEN OTHERS THEN NULL; END;
END;
/

-- ==================================================================
-- CREACIÓN DE TABLAS
-- ==================================================================

CREATE TABLE CIA (
    CodCIA NUMBER(6) NOT NULL,
    DesCia VARCHAR2(100) NOT NULL,
    DesCorta VARCHAR2(20) NOT NULL,
    Vigente VARCHAR2(1) NOT NULL,
    CONSTRAINT CIA_PK PRIMARY KEY (CodCIA)
);

CREATE TABLE TABS (
    CodTab VARCHAR2(3) NOT NULL,
    DenTab VARCHAR2(50) NOT NULL,
    DenCorta VARCHAR2(10) NOT NULL,
    Vigente VARCHAR2(1) NOT NULL,
    CONSTRAINT TABS_PK PRIMARY KEY (CodTab)
);

CREATE TABLE ELEMENTOS (
    CodTab VARCHAR2(3) NOT NULL,
    CodElem VARCHAR2(3) NOT NULL,
    DenEle VARCHAR2(50) NOT NULL,
    DenCorta VARCHAR2(10) NOT NULL,
    Vigente VARCHAR2(1) NOT NULL,
    CONSTRAINT ELEMENTOS_PK PRIMARY KEY (CodTab, CodElem),
    CONSTRAINT ELEMENTOS_TABS_FK FOREIGN KEY (CodTab) REFERENCES TABS (CodTab)
);

CREATE TABLE PERSONA (
    CodCIA NUMBER(6) NOT NULL,
    CodPersona NUMBER(6) NOT NULL,
    TipPersona VARCHAR2(1) NOT NULL,
    DesPersona VARCHAR2(100) NOT NULL,
    DesCorta VARCHAR2(30) NOT NULL,
    DescAlterna VARCHAR2(100) NOT NULL,
    DesCortaAlt VARCHAR2(10) NOT NULL,
    Vigente VARCHAR2(1) NOT NULL,
    CONSTRAINT CIA_PERSONA_PK PRIMARY KEY (CodCIA, CodPersona),
    CONSTRAINT PERSONA_EMPRESA_VTA_FK FOREIGN KEY (CodCIA) REFERENCES CIA (CodCIA)
);

CREATE TABLE usuarios (
    CodCIA NUMBER(6) NOT NULL,
    CodUsuario NUMBER(6) NOT NULL,
    username VARCHAR2(50) UNIQUE NOT NULL,
    password_hash VARCHAR2(200) NOT NULL,
    tipo_usuario VARCHAR2(15) NOT NULL,
    CONSTRAINT usuarios_PK PRIMARY KEY (CodCIA, CodUsuario),
    CONSTRAINT fk_usuario_cia FOREIGN KEY (CodCIA) REFERENCES CIA(CodCIA)
);

CREATE TABLE areas (
    CodCIA NUMBER(6) NOT NULL,
    CodArea NUMBER(6) NOT NULL,
    nombre VARCHAR2(100) NOT NULL,
    descripcion VARCHAR2(300),
    estado CHAR(1) DEFAULT 'A',
    CONSTRAINT areas_PK PRIMARY KEY (CodCIA, CodArea),
    CONSTRAINT fk_area_cia FOREIGN KEY (CodCIA) REFERENCES CIA(CodCIA)
);

CREATE TABLE EMPLEADO (
    CodCIA NUMBER(6) NOT NULL,
    CodEmpleado NUMBER(6) NOT NULL,
    Direcc VARCHAR2(100) NOT NULL,
    Celular VARCHAR2(33) NOT NULL,
    Hobby VARCHAR2(2000) NOT NULL,
    Foto BLOB,
    FecNac DATE NOT NULL,
    DNI VARCHAR2(20) NOT NULL,
    NroCIP VARCHAR2(10) NOT NULL,
    FecCIPVig DATE NOT NULL,
    LicCond VARCHAR2(1) NOT NULL,
    FlgEmplIEA VARCHAR2(1) NOT NULL,
    Observac VARCHAR2(300) NOT NULL,
    CodCargo NUMBER(4) NOT NULL,
    Email VARCHAR2(100) NOT NULL,
    Vigente VARCHAR2(1) NOT NULL,
    CONSTRAINT EMPLEADO_PK PRIMARY KEY (CodCIA, CodEmpleado),
    CONSTRAINT PERSONA_EMPLEADO_FK FOREIGN KEY (CodCIA, CodEmpleado) REFERENCES PERSONA (CodCIA, CodPersona)
);

CREATE TABLE CLIENTE (
    CodCIA NUMBER(6) NOT NULL,
    CodCliente NUMBER(6) NOT NULL,
    NroRuc VARCHAR2(20) NOT NULL,
    Vigente VARCHAR2(1) NOT NULL,
    CONSTRAINT CLIENTE_PK PRIMARY KEY (CodCIA, CodCliente),
    CONSTRAINT PERSONA_CLIENTE_FK FOREIGN KEY (CodCIA, CodCliente) REFERENCES PERSONA (CodCIA, CodPersona)
);

CREATE TABLE PROYECTO (
    CodCIA NUMBER(6) NOT NULL,
    CodPyto NUMBER(6) NOT NULL,
    NombPyto VARCHAR2(1000) NOT NULL,
    EmplJefeProy NUMBER(6) NOT NULL,
    CodCIA1 NUMBER(6) NOT NULL,
    CiaContrata NUMBER(6) NOT NULL,
    CodCC NUMBER(6) NOT NULL,
    CodCliente NUMBER(6) NOT NULL,
    FlgEmpConsorcio VARCHAR2(1) NOT NULL,
    CodSNIP VARCHAR2(10) NOT NULL,
    FecReg DATE NOT NULL,
    CodFase NUMBER(1) NOT NULL,
    CodNivel NUMBER(2) NOT NULL,
    CodFuncion VARCHAR2(4) NOT NULL,
    CodSituacion NUMBER(2) NOT NULL,
    NumInfor NUMBER(1) NOT NULL,
    NumInforEntrg NUMBER(1) NOT NULL,
    EstPyto NUMBER(2) NOT NULL,
    FecEstado DATE NOT NULL,
    ValRefer NUMBER(12,2) NOT NULL,
    CostoDirecto NUMBER(12,2) NOT NULL,
    CostoGGen NUMBER(12,2) NOT NULL,
    CostoFinan NUMBER(12,2) NOT NULL,
    ImpUtilidad NUMBER(12,2) NOT NULL,
    CostoTotSinIGV NUMBER(12,2) NOT NULL,
    ImpIGV NUMBER(12,2) NOT NULL,
    CostoTotal NUMBER(12,2) NOT NULL,
    CostoPenalid NUMBER(12,2) NOT NULL,
    CodDpto VARCHAR2(2) NOT NULL,
    CodProv VARCHAR2(2) NOT NULL,
    CodDist VARCHAR2(2) NOT NULL,
    FecViab DATE NOT NULL,
    RutaDoc VARCHAR2(300) NOT NULL,
    AnnoIni NUMBER(4) NOT NULL,
    AnnoFin NUMBER(4) NOT NULL,
    CodObjC NUMBER(2) NOT NULL,
    LogoProy BLOB,
    TabEstado VARCHAR2(3) NOT NULL,
    CodEstado VARCHAR2(3) NOT NULL,
    Observac VARCHAR2(500) NOT NULL,
    Vigente VARCHAR2(1) NOT NULL,
    CONSTRAINT PROYECTO_PK PRIMARY KEY (CodCIA, CodPyto),
    CONSTRAINT CIA_PROYECTO_FK FOREIGN KEY (CodCIA) REFERENCES CIA (CodCIA),
    CONSTRAINT EMPLEADO_PROYECTO_FK FOREIGN KEY (CodCIA, EmplJefeProy) REFERENCES EMPLEADO (CodCIA, CodEmpleado),
    CONSTRAINT CLIENTE_PROYECTO_FK FOREIGN KEY (CodCIA, CodCliente) REFERENCES CLIENTE (CodCIA, CodCliente)
);

CREATE TABLE especialidades_personal (
    CodCIA NUMBER(6) NOT NULL,
    CodEspecialidad NUMBER(6) NOT NULL,
    CodEmpleado NUMBER(6) NOT NULL,
    especialidad VARCHAR2(100) NOT NULL,
    certificado BLOB,
    institucion VARCHAR2(200),
    fecha_obtencion DATE,
    horas_capacitacion NUMBER(6,2),
    CONSTRAINT pk_esp_empleado PRIMARY KEY (CodCIA, CodEspecialidad, CodEmpleado),
    CONSTRAINT fk_esp_empleado FOREIGN KEY (CodCIA, CodEmpleado) REFERENCES EMPLEADO(CodCIA, CodEmpleado) ON DELETE CASCADE
);

CREATE TABLE grados_academicos (
    CodCIA NUMBER(6) NOT NULL,
    CodGrado NUMBER(6) NOT NULL,
    CodEmpleado NUMBER(6) NOT NULL,
    tipo_grado VARCHAR2(50),
    carrera VARCHAR2(100) NOT NULL,
    titulo VARCHAR2(200) NOT NULL,
    institucion VARCHAR2(200) NOT NULL,
    fecha_obtencion DATE,
    documento BLOB,
    CONSTRAINT pk_grado_empleado PRIMARY KEY (CodCIA, CodGrado, CodEmpleado),
    CONSTRAINT fk_grado_empleado FOREIGN KEY (CodCIA, CodEmpleado) REFERENCES EMPLEADO(CodCIA, CodEmpleado) ON DELETE CASCADE
);

CREATE TABLE experiencia_laboral (
    CodCIA NUMBER(6) NOT NULL,
    CodExperiencia NUMBER(6) NOT NULL,
    CodEmpleado NUMBER(6) NOT NULL,
    empresa VARCHAR2(200) NOT NULL,
    especialidad VARCHAR2(100),
    fecha_inicio DATE NOT NULL,
    fecha_fin DATE,
    certificado BLOB,
    CONSTRAINT pk_exp_empleado PRIMARY KEY (CodCIA, CodExperiencia, CodEmpleado),
    CONSTRAINT fk_exp_empleado FOREIGN KEY (CodCIA, CodEmpleado) REFERENCES EMPLEADO(CodCIA, CodEmpleado) ON DELETE CASCADE
);

CREATE TABLE cargos_areas (
    CodCargo NUMBER(6) NOT NULL,
    CodArea NUMBER(6) NOT NULL,
    CodCIA NUMBER(6) NOT NULL,
    nombre_cargo VARCHAR2(100) NOT NULL,
    CONSTRAINT cargos_areas_PK PRIMARY KEY (CodCargo, CodArea, CodCIA),
    CONSTRAINT fk_cargo_area FOREIGN KEY (CodCIA, CodArea) REFERENCES areas(CodCIA, CodArea) ON DELETE CASCADE,
    CONSTRAINT fk_cargo_cia FOREIGN KEY (CodCIA) REFERENCES CIA(CodCIA)
);

CREATE TABLE personal_proyectos (
    CodCIA NUMBER(6) NOT NULL,
    CodPersonalProyecto NUMBER(6) NOT NULL,
    CodEmpleado NUMBER(6) NOT NULL,
    CodPyto NUMBER(6) NOT NULL,
    CodCargo NUMBER(6) NOT NULL,
    CodArea NUMBER(6) NOT NULL,
    fecha_asignacion DATE DEFAULT SYSDATE,
    fecha_desasignacion DATE,
    horas_asignadas NUMBER(5,2),
    monto_asignado NUMBER(12,2),
    documento BLOB,
    CONSTRAINT pk_pp_empleado PRIMARY KEY (CodCIA, CodPersonalProyecto, CodEmpleado),
    CONSTRAINT fk_pp_empleado FOREIGN KEY (CodCIA, CodEmpleado) REFERENCES EMPLEADO(CodCIA, CodEmpleado) ON DELETE CASCADE,
    CONSTRAINT fk_pp_proyecto FOREIGN KEY (CodCIA, CodPyto) REFERENCES PROYECTO(CodCIA, CodPyto) ON DELETE CASCADE,
    CONSTRAINT fk_pp_cargo FOREIGN KEY (CodCargo, CodArea, CodCIA) REFERENCES cargos_areas(CodCargo, CodArea, CodCIA) ON DELETE CASCADE,
    CONSTRAINT fk_pp_area FOREIGN KEY (CodCIA, CodArea) REFERENCES areas(CodCIA, CodArea) ON DELETE CASCADE,
    CONSTRAINT uk_empleado_proyecto UNIQUE (CodCIA, CodEmpleado, CodPyto, fecha_asignacion)
);

CREATE TABLE tareas_personal (
    CodCIA NUMBER(6) NOT NULL,
    CodTarea  NUMBER(6) NOT NULL,
    CodPyto NUMBER(6) NOT NULL,
    CodEmpleado NUMBER(6),
    nombre VARCHAR2(200) NOT NULL,
    descripcion CLOB,
    fecha_inicio DATE,
    fecha_fin DATE,
    estado VARCHAR2(20) DEFAULT 'PENDIENTE',
    CONSTRAINT tareas_personal_PK PRIMARY KEY (CodCIA, CodTarea, CodPyto, CodEmpleado),
    CONSTRAINT fk_tarea_proyecto FOREIGN KEY (CodCIA, CodPyto) REFERENCES PROYECTO(CodCIA, CodPyto) ON DELETE CASCADE,
    CONSTRAINT fk_tarea_empleado FOREIGN KEY (CodCIA, CodEmpleado) REFERENCES EMPLEADO(CodCIA, CodEmpleado)
);

CREATE TABLE evaluaciones_desempeno (
    CodCIA NUMBER(6) NOT NULL,
    CodEvaluacion NUMBER(6) NOT NULL,
    CodEmpleado NUMBER(6) NOT NULL,
    CodPyto NUMBER(6),
    evaluador_id NUMBER NOT NULL,
    puntuacion_total NUMBER(4,2) CHECK (puntuacion_total >= 0 AND puntuacion_total <= 100),
    competencias_tecnicas NUMBER(4,2),
    competencias_blandas NUMBER(4,2),
    cumplimiento_objetivos NUMBER(4,2),
    CONSTRAINT evaluaciones_desempeno_PK PRIMARY KEY (CodCIA, CodEvaluacion, CodEmpleado, CodPyto),
    CONSTRAINT fk_eval_empleado FOREIGN KEY (CodCIA, CodEmpleado) REFERENCES EMPLEADO(CodCIA, CodEmpleado),
    CONSTRAINT fk_eval_proyecto FOREIGN KEY (CodCIA, CodPyto) REFERENCES PROYECTO(CodCIA, CodPyto),
    CONSTRAINT fk_eval_evaluador FOREIGN KEY (CodCIA, evaluador_id) REFERENCES EMPLEADO(CodCIA, CodEmpleado)
);

CREATE TABLE PROVEEDOR (
    CodCIA NUMBER(6) NOT NULL,
    CodProveedor NUMBER(6) NOT NULL,
    NroRuc VARCHAR2(20) NOT NULL,
    Vigente VARCHAR2(1) NOT NULL,
    CONSTRAINT PROVEEDOR_PK PRIMARY KEY (CodCIA, CodProveedor),
    CONSTRAINT PERSONA_PROVEEDOR_FK FOREIGN KEY (CodCIA, CodProveedor) REFERENCES PERSONA (CodCIA, CodPersona)
);

CREATE TABLE servicios_proveedor (
    CodCIA NUMBER(6) NOT NULL,
    CodServicio NUMBER(6) NOT NULL,
    CodProveedor NUMBER(6) NOT NULL,
    nombre_servicio VARCHAR2(200) NOT NULL,
    descripcion CLOB,
    documento_servicio BLOB,
    CONSTRAINT pk_servicio_proveedor PRIMARY KEY (CodCIA, CodServicio, CodProveedor),
    CONSTRAINT fk_servicio_proveedor FOREIGN KEY (CodCIA, CodProveedor) REFERENCES PROVEEDOR(CodCIA, CodProveedor) ON DELETE CASCADE
);

CREATE TABLE contratos_proveedor (
    CodCIA NUMBER(6) NOT NULL,
    CodContrato NUMBER(6) NOT NULL,
    CodProveedor NUMBER(6) NOT NULL,
    CodPyto NUMBER(6),
    numero_contrato VARCHAR2(50) UNIQUE NOT NULL,
    tipo_contrato VARCHAR2(50),
    fecha_inicio DATE NOT NULL,
    fecha_fin DATE,
    monto_total NUMBER(15,2) NOT NULL,
    moneda VARCHAR2(3) DEFAULT 'PEN',
    documento_contrato BLOB,
    CONSTRAINT contratos_proveedor_PK PRIMARY KEY (CodCIA, CodContrato, CodProveedor, CodPyto),
    CONSTRAINT fk_contrato_proveedor FOREIGN KEY (CodCIA, CodProveedor) REFERENCES PROVEEDOR(CodCIA, CodProveedor),
    CONSTRAINT fk_contrato_proyecto FOREIGN KEY (CodCIA, CodPyto) REFERENCES PROYECTO(CodCIA, CodPyto)
);

CREATE TABLE actividades_proveedor (
    CodCIA NUMBER(6) NOT NULL,
    CodActividad NUMBER(6) NOT NULL,
    CodProveedor NUMBER(6) NOT NULL,
    CodPyto NUMBER(6),
    CodContrato NUMBER(6),
    descripcion VARCHAR2(500) NOT NULL,
    fecha_actividad DATE DEFAULT SYSDATE,
    monto NUMBER(12,2),
    estado VARCHAR2(20) DEFAULT 'PENDIENTE',
    documento BLOB,
    observaciones VARCHAR2(1000),
    CONSTRAINT actividades_proveedor_PK PRIMARY KEY (CodCIA, CodActividad, CodProveedor, CodPyto, CodContrato),
    CONSTRAINT fk_actividad_proveedor FOREIGN KEY (CodCIA, CodProveedor) REFERENCES PROVEEDOR(CodCIA, CodProveedor) ON DELETE CASCADE,
    CONSTRAINT fk_actividad_proyecto FOREIGN KEY (CodCIA, CodPyto) REFERENCES PROYECTO(CodCIA, CodPyto),
    CONSTRAINT fk_actividad_contrato FOREIGN KEY (CodCIA, CodContrato, CodProveedor, CodPyto) REFERENCES contratos_proveedor(CodCIA, CodContrato, CodProveedor, CodPyto)
);

CREATE TABLE documentos_proveedor (
    CodCIA NUMBER(6) NOT NULL,
    CodDocumento NUMBER(6) NOT NULL,
    CodProveedor NUMBER(6) NOT NULL,
    tipo_documento VARCHAR2(50),
    numero_documento VARCHAR2(100),
    archivo BLOB NOT NULL,
    tipo_archivo VARCHAR2(10),
    fecha_emision DATE,
    fecha_vencimiento DATE,
    CONSTRAINT documentos_proveedor_PK PRIMARY KEY (CodCIA, CodDocumento, CodProveedor),
    CONSTRAINT fk_doc_proveedor FOREIGN KEY (CodCIA, CodProveedor) REFERENCES PROVEEDOR(CodCIA, CodProveedor) ON DELETE CASCADE
);

CREATE TABLE COMP_PAGOCAB (
    CodCIA NUMBER(6) NOT NULL,
    CodProveedor NUMBER(6) NOT NULL,
    NroCP VARCHAR2(20) NOT NULL,
    CodPyto NUMBER(6) NOT NULL,
    NroPago NUMBER(3) NOT NULL,
    TCompPago VARCHAR2(3) NOT NULL,
    ECompPago VARCHAR2(3) NOT NULL,
    FecCP DATE NOT NULL,
    TMoneda VARCHAR2(3) NOT NULL,
    EMoneda VARCHAR2(3) NOT NULL,
    TipCambio NUMBER(7,4) NOT NULL,
    ImpMO NUMBER(9,2) NOT NULL,
    ImpNetoMN NUMBER(9,2) NOT NULL,
    ImpIGVMN NUMBER(9,2) NOT NULL,
    ImpTotalMn NUMBER(10,2) NOT NULL,
    FotoCP BLOB,
    FotoAbono BLOB,
    FecAbono DATE NOT NULL,
    DesAbono VARCHAR2(1000) NOT NULL,
    Semilla NUMBER(5) NOT NULL,
    TabEstado VARCHAR2(3) NOT NULL,
    CodEstado VARCHAR2(3) NOT NULL,
    CONSTRAINT COMP_PAGOCAB_PK PRIMARY KEY (CodCIA, CodProveedor, NroCP),
    CONSTRAINT COMP_PAGOCAB_PROVEEDOR_FK FOREIGN KEY (CodCIA, CodProveedor) REFERENCES PROVEEDOR (CodCIA, CodProveedor),
    CONSTRAINT COMP_PAGOCAB_ELEMENTOS_FK FOREIGN KEY (TMoneda, EMoneda) REFERENCES ELEMENTOS (CodTab, CodElem),
    CONSTRAINT COMP_PAGOCAB_ELEMENTOS_2_FK FOREIGN KEY (TCompPago, ECompPago) REFERENCES ELEMENTOS (CodTab, CodElem),
    CONSTRAINT COMP_PAGOCAB_PROYECTO_FK FOREIGN KEY (CodCIA, CodPyto) REFERENCES PROYECTO (CodCIA, CodPyto)
);

CREATE TABLE COMP_PAGOEMPLEADO (
    CodCIA NUMBER(6) NOT NULL,
    CodEmpleado NUMBER(6) NOT NULL,
    NroCP VARCHAR2(20) NOT NULL,
    CodPyto NUMBER(6) NOT NULL,
    NroPago NUMBER(3) NOT NULL,
    TCompPago VARCHAR2(3) NOT NULL,
    ECompPago VARCHAR2(3) NOT NULL,
    FecCP DATE NOT NULL,
    TMoneda VARCHAR2(3) NOT NULL,
    EMoneda VARCHAR2(3) NOT NULL,
    TipCambio NUMBER(7,4) NOT NULL,
    ImpMO NUMBER(9,2) NOT NULL,
    ImpNetoMN NUMBER(9,2) NOT NULL,
    ImpIGVMN NUMBER(9,2) NOT NULL,
    ImpTotalMn NUMBER(10,2) NOT NULL,
    FotoCP BLOB,
    FotoAbono BLOB,
    FecAbono DATE NOT NULL,
    DesAbono VARCHAR2(1000) NOT NULL,
    Semilla NUMBER(5) NOT NULL,
    TabEstado VARCHAR2(3) NOT NULL,
    CodEstado VARCHAR2(3) NOT NULL,
    CONSTRAINT COMP_PAGOEMPLEADO_PK PRIMARY KEY (CodCIA, CodEmpleado, NroCP),
    CONSTRAINT COMP_PAGOEMPLEADO_EMPLEADO_FK FOREIGN KEY (CodCIA, CodEmpleado) REFERENCES EMPLEADO (CodCIA, CodEmpleado),
    CONSTRAINT COMP_PAGOEMPLEADO_ELEMENTOS_FK FOREIGN KEY (TMoneda, EMoneda) REFERENCES ELEMENTOS (CodTab, CodElem),
    CONSTRAINT COMP_PAGOEMPLEADO_ELEMENTOS_2_FK FOREIGN KEY (TCompPago, ECompPago) REFERENCES ELEMENTOS (CodTab, CodElem),
    CONSTRAINT COMP_PAGOEMPLEADO_PROYECTO_FK FOREIGN KEY (CodCIA, CodPyto) REFERENCES PROYECTO (CodCIA, CodPyto)
);

-- ==================================================================
-- SECUENCIAS
-- ==================================================================

CREATE SEQUENCE SEC_CIA
    START WITH 1
    INCREMENT BY 1
    MINVALUE 1
    MAXVALUE 999999
    NOCACHE;

CREATE SEQUENCE SEC_PERSONA
    START WITH 1
    INCREMENT BY 1
    MINVALUE 1  
    MAXVALUE 999999
    NOCACHE;

CREATE SEQUENCE SEC_USUARIOS
    START WITH 1
    INCREMENT BY 1  
    MINVALUE 1
    MAXVALUE 999999
    NOCACHE;

CREATE SEQUENCE SEC_TABS
    START WITH 1 
    INCREMENT BY 1
    MINVALUE 1
    MAXVALUE 999999
    NOCACHE;

CREATE SEQUENCE SEC_AREAS
    START WITH 1
    INCREMENT BY 1
    MINVALUE 1
    MAXVALUE 999999
    NOCACHE;

CREATE SEQUENCE SEC_CARGOS
    START WITH 1
    INCREMENT BY 1
    MINVALUE 1
    MAXVALUE 999999
    NOCACHE;

CREATE SEQUENCE SEC_PROYECTO
    START WITH 1  
    INCREMENT BY 1
    MINVALUE 1
    MAXVALUE 999999
    NOCACHE;

CREATE SEQUENCE SEC_ESPECIALIDADES
    START WITH 1
    INCREMENT BY 1
    MINVALUE 1
    MAXVALUE 999999
    NOCACHE;

CREATE SEQUENCE SEC_GRADOS
    START WITH 1
    INCREMENT BY 1
    MINVALUE 1
    MAXVALUE 999999
    NOCACHE;

CREATE SEQUENCE SEC_EXPERIENCIA
    START WITH 1
    INCREMENT BY 1
    MINVALUE 1
    MAXVALUE 999999
    NOCACHE;

CREATE SEQUENCE SEC_PERSONAL_PROYECTOS
    START WITH 1
    INCREMENT BY 1
    MINVALUE 1
    MAXVALUE 999999
    NOCACHE;

CREATE SEQUENCE SEC_TAREAS
    START WITH 1
    INCREMENT BY 1
    MINVALUE 1
    MAXVALUE 999999
    NOCACHE;

CREATE SEQUENCE SEC_EVALUACIONES
    START WITH 1
    INCREMENT BY 1
    MINVALUE 1
    MAXVALUE 999999
    NOCACHE;

CREATE SEQUENCE SEC_SERVICIOS
    START WITH 1
    INCREMENT BY 1
    MINVALUE 1
    MAXVALUE 999999
    NOCACHE;

CREATE SEQUENCE SEC_CONTRATOS
    START WITH 1
    INCREMENT BY 1
    MINVALUE 1
    MAXVALUE 999999
    NOCACHE;

CREATE SEQUENCE SEC_ACTIVIDADES
    START WITH 1
    INCREMENT BY 1
    MINVALUE 1
    MAXVALUE 999999
    NOCACHE;

CREATE SEQUENCE SEC_DOCUMENTOS
    START WITH 1
    INCREMENT BY 1
    MINVALUE 1
    MAXVALUE 999999
    NOCACHE;

-- ==================================================================
-- FUNCIONES UTILITARIAS
-- ==================================================================

-- Función para calcular duración de proyecto en años
CREATE OR REPLACE FUNCTION DURACION_PROYECTO(
    COD_PYTO IN PROYECTO.CODPYTO%TYPE
) RETURN NUMBER IS
    duracionEnAnios NUMBER;
BEGIN
    SELECT (AnnoFin - AnnoIni + 1) INTO duracionEnAnios 
    FROM PROYECTO 
    WHERE CodPyto = COD_PYTO;
    
    RETURN duracionEnAnios;
EXCEPTION
    WHEN NO_DATA_FOUND THEN
        RETURN 0;
    WHEN OTHERS THEN
        RETURN -1;
END DURACION_PROYECTO;
/

-- Función para obtener tipo de persona
CREATE OR REPLACE FUNCTION GET_PERSONA_TIPO(
    COD_CIA IN PERSONA.CODCIA%TYPE,
    COD_PERSONA IN PERSONA.CODPERSONA%TYPE
) RETURN VARCHAR2 IS
    tipo VARCHAR2(1);
BEGIN
    SELECT TipPersona INTO tipo
    FROM PERSONA
    WHERE CodCIA = COD_CIA AND CodPersona = COD_PERSONA;
    
    RETURN tipo;
EXCEPTION
    WHEN NO_DATA_FOUND THEN
        RETURN NULL;
    WHEN OTHERS THEN
        RETURN NULL;
END GET_PERSONA_TIPO;
/

-- ==================================================================
-- PROCEDIMIENTOS DE INSERCIÓN MEJORADOS
-- ==================================================================

-- Procedimiento para insertar CIA
CREATE OR REPLACE PROCEDURE INSERTAR_CIA( 
    CODC IN CIA.CODCIA%TYPE, 
    DES IN CIA.DESCIA%TYPE, 
    DESCORTA IN CIA.DESCORTA%TYPE, 
    VIG IN CIA.VIGENTE%TYPE
) IS 
BEGIN
    INSERT INTO CIA VALUES(SEC_CIA.NEXTVAL, DES, DESCORTA, VIG); 
END; 
/ 

-- Procedimiento para insertar CLIENTE
CREATE OR REPLACE PROCEDURE INSERTAR_CLIENTE( 
    CODCIA IN PERSONA.CODCIA%TYPE,  
    DESP IN PERSONA.DESPERSONA%TYPE, 
    DESCOR IN PERSONA.DESCORTA%TYPE, 
    DESCALT IN PERSONA.DESCALTERNA%TYPE, 
    DESCORALT IN PERSONA.DESCORTAALT%TYPE, 
    VIG IN PERSONA.VIGENTE%TYPE, 
    RUC IN CLIENTE.NRORUC%TYPE
) IS 
BEGIN
    INSERT INTO PERSONA VALUES(CODCIA, SEC_PERSONA.NEXTVAL, '2', DESP, DESCOR, DESCALT, DESCORALT, VIG); 
     INSERT INTO CLIENTE VALUES(CODCIA, SEC_PERSONA.CURRVAL, RUC, VIG); 
END; 
/ 

-- Procedimiento para insertar EMPLEADO
CREATE OR REPLACE PROCEDURE INSERTAR_EMPLEADO( 
    CIA IN PERSONA.CODCIA%TYPE, 
    TIP IN PERSONA.TIPPERSONA%TYPE, 
    DESP IN PERSONA.DESPERSONA%TYPE, 
    DESCOR IN PERSONA.DESCORTA%TYPE, 
    DESCALT IN PERSONA.DESCALTERNA%TYPE, 
    DESCORALT IN PERSONA.DESCORTAALT%TYPE, 
    VIG IN PERSONA.VIGENTE%TYPE, 
    DIR IN EMPLEADO.DIRECC%TYPE, 
    CEL IN EMPLEADO.CELULAR%TYPE, 
    HOB IN EMPLEADO.HOBBY%TYPE, 
    FOT IN EMPLEADO.FOTO%TYPE, 
    NAC IN EMPLEADO.FECNAC%TYPE, 
    IDEN IN EMPLEADO.DNI%TYPE, 
    CIP IN EMPLEADO.NROCIP%TYPE, 
    CIPVIG IN EMPLEADO.FECCIPVIG%TYPE, 
    COND IN EMPLEADO.LICCOND%TYPE, 
    FLG IN EMPLEADO.FLGEMPLIEA%TYPE, 
    OBS IN EMPLEADO.OBSERVAC%TYPE, 
    CODCAR IN EMPLEADO.CODCARGO%TYPE, 
    CORREO IN EMPLEADO.EMAIL%TYPE
) IS 
BEGIN
    INSERT INTO PERSONA VALUES(CIA, SEC_PERSONA.NEXTVAL, TIP, DESP, DESCOR, DESCALT, DESCORALT, VIG); 
    INSERT INTO EMPLEADO VALUES(CIA, SEC_PERSONA.CURRVAL, DIR, CEL, HOB, FOT, NAC, IDEN, CIP, CIPVIG, COND, FLG, OBS, CODCAR, CORREO, VIG); 
END; 
/ 

-- Procedimiento para insertar PROVEEDOR
CREATE OR REPLACE PROCEDURE INSERTAR_PROVEEDOR( 
    CODC IN PERSONA.CODCIA%TYPE, 
    TIP IN PERSONA.TIPPERSONA%TYPE, 
    DESP IN PERSONA.DESPERSONA%TYPE, 
    DESCOR IN PERSONA.DESCORTA%TYPE, 
    DESCALT IN PERSONA.DESCALTERNA%TYPE, 
    DESCORALT IN PERSONA.DESCORTAALT%TYPE, 
    VIG IN PERSONA.VIGENTE%TYPE, 
    RUC IN PROVEEDOR.NRORUC%TYPE
) IS 
BEGIN 
    INSERT INTO PERSONA VALUES(CODC, SEC_PERSONA.NEXTVAL, TIP, DESP, DESCOR, DESCALT, DESCORALT, VIG); 
    INSERT INTO PROVEEDOR VALUES(CODC, SEC_PERSONA.CURRVAL, RUC, VIG); 
END; 
/ 

-- Procedimiento para insertar PROYECTO
CREATE OR REPLACE PROCEDURE INSERTAR_PROYECTO( 
    COD_CIA IN PROYECTO.CODCIA%TYPE, 
    NOMPY IN PROYECTO.NOMBPYTO%TYPE, 
    JEFE IN PROYECTO.EMPLJEFEPROY%TYPE, 
    CIACONT IN PROYECTO.CIACONTRATA%TYPE, 
    CODCLI IN PROYECTO.CODCLIENTE%TYPE, 
    FECRE IN PROYECTO.FECREG%TYPE, 
    ESTPYT IN PROYECTO.ESTPYTO%TYPE, 
    FECEST IN PROYECTO.FECESTADO%TYPE, 
    VALREF IN PROYECTO.VALREFER%TYPE, 
    COSTOTOTSIN IN PROYECTO.COSTOTOTSINIGV%TYPE, 
    IGV IN PROYECTO.IMPIGV%TYPE, 
    COSTOT IN PROYECTO.COSTOTOTAL%TYPE, 
    OBS IN PROYECTO.OBSERVAC%TYPE, 
    ANNOIN IN PROYECTO.ANNOINI%TYPE, 
    ANNOFI IN PROYECTO.ANNOFIN%TYPE, 
    LOGO IN PROYECTO.LOGOPROY%TYPE, 
    VIGENT IN PROYECTO.VIGENTE%TYPE
) IS 
BEGIN
    INSERT INTO PROYECTO (
        CodCIA, CodPyto, NombPyto, EmplJefeProy, CodCia1, CiaContrata, CodCC, CodCliente,
        FlgEmpConsorcio, CodSNIP, FecReg, CodFase, CodNivel, CodFuncion, CodSituacion,
        NumInfor, NumInforEntrg, EstPyto, FecEstado, ValRefer, CostoDirecto, CostoGGen,
        CostoFinan, ImpUtilidad, CostoTotSinIGV, ImpIGV, CostoTotal, CostoPenalid, CodDpto,
        CodProv, CodDist, FecViab, RutaDoc, AnnoIni, AnnoFin, CodObjC, LogoProy, TabEstado,
        CodEstado, Observac, Vigente
    ) 
    VALUES (
        COD_CIA, SEC_PROYECTO.NEXTVAL, NOMPY, JEFE, -999, CIACONT, -999, CODCLI, '-', '-', 
        FECRE, 0, 0, '-', 0, 0, 0, ESTPYT, FECEST, VALREF, -999, -999, -999, -999, COSTOTOTSIN,
        IGV, COSTOT, -999, '-', '-', '-', '01-01-2022', 'RUTA_DOC', ANNOIN, ANNOFI, 0, LOGO,
        '-1', '1', OBS, VIGENT
    ); 
END; 
/

-- Procedimiento para insertar ELEMENTOS
CREATE OR REPLACE PROCEDURE INSERTAR_ELEMENTOS( 
    CTAB IN ELEMENTOS.CODTAB%TYPE, 
    CELE IN ELEMENTOS.CODELEM%TYPE, 
    DEELE IN ELEMENTOS.DENELE%TYPE, 
    DECORTA IN ELEMENTOS.DENCORTA%TYPE, 
    VIG IN ELEMENTOS.VIGENTE%TYPE
) IS 
BEGIN
    INSERT INTO ELEMENTOS VALUES (CTAB, CELE, DEELE, DECORTA, VIG); 
END; 
/ 

-- Procedimiento para insertar TABS
CREATE OR REPLACE PROCEDURE INSERTAR_TABS( 
    DETAB IN TABS.DENTAB%TYPE, 
    DECOR IN TABS.DENCORTA%TYPE, 
    VIG IN TABS.VIGENTE%TYPE
) IS 
BEGIN
    INSERT INTO TABS VALUES (SEC_TABS.NEXTVAL, DETAB, DECOR, VIG); 
END; 
/ 

-- Procedimiento para insertar USUARIOS
CREATE OR REPLACE PROCEDURE INSERTAR_USUARIO(
    CIA IN usuarios.CODCIA%TYPE,
    USUARIO IN usuarios.username%TYPE,
    PASS IN usuarios.password_hash%TYPE,
    TIPO IN usuarios.tipo_usuario%TYPE
) IS 
BEGIN
    INSERT INTO usuarios VALUES (CIA, SEC_USUARIOS.NEXTVAL, USUARIO, PASS, TIPO);
END;
/

-- Procedimiento para insertar AREAS
CREATE OR REPLACE PROCEDURE INSERTAR_AREA(
    CIA IN areas.CODCIA%TYPE,
    NOMBRE IN areas.nombre%TYPE,
    DESC_AREA IN areas.descripcion%TYPE,
    ESTADO IN areas.estado%TYPE
) IS 
BEGIN
    INSERT INTO areas VALUES (CIA, SEC_AREAS.NEXTVAL, NOMBRE, DESC_AREA, ESTADO);
END;
/

-- Procedimiento para insertar CARGOS_AREAS
CREATE OR REPLACE PROCEDURE INSERTAR_CARGO(
    CIA IN cargos_areas.CODCIA%TYPE,
    AREA IN cargos_areas.CODAREA%TYPE,
    NOMBRE_CARGO IN cargos_areas.nombre_cargo%TYPE
) IS 
BEGIN
    INSERT INTO cargos_areas VALUES (SEC_CARGOS.NEXTVAL, AREA, CIA, NOMBRE_CARGO);
END;
/

-- Procedimiento para insertar ESPECIALIDADES_PERSONAL
CREATE OR REPLACE PROCEDURE INSERTAR_ESPECIALIDAD(
    CIA IN especialidades_personal.CODCIA%TYPE,
    EMP IN especialidades_personal.CODEMPLEADO%TYPE,
    ESP IN especialidades_personal.especialidad%TYPE,
    CERT IN especialidades_personal.certificado%TYPE,
    INST IN especialidades_personal.institucion%TYPE,
    FECHA IN especialidades_personal.fecha_obtencion%TYPE,
    HORAS IN especialidades_personal.horas_capacitacion%TYPE
) IS 
BEGIN
    INSERT INTO especialidades_personal VALUES (CIA, SEC_ESPECIALIDADES.NEXTVAL, EMP, ESP, CERT, INST, FECHA, HORAS);
END;
/

-- Procedimiento para insertar GRADOS_ACADEMICOS
CREATE OR REPLACE PROCEDURE INSERTAR_GRADO(
    CIA IN grados_academicos.CODCIA%TYPE,
    EMP IN grados_academicos.CODEMPLEADO%TYPE,
    TIPO_GRADO IN grados_academicos.tipo_grado%TYPE,
    CARRERA IN grados_academicos.carrera%TYPE,
    TITULO IN grados_academicos.titulo%TYPE,
    INST IN grados_academicos.institucion%TYPE,
    FECHA IN grados_academicos.fecha_obtencion%TYPE,
    DOC IN grados_academicos.documento%TYPE
) IS 
BEGIN
    INSERT INTO grados_academicos VALUES (CIA, SEC_GRADOS.NEXTVAL, EMP, TIPO_GRADO, CARRERA, TITULO, INST, FECHA, DOC);
END;
/

-- Procedimiento para insertar EXPERIENCIA_LABORAL
CREATE OR REPLACE PROCEDURE INSERTAR_EXPERIENCIA(
    CIA IN experiencia_laboral.CODCIA%TYPE,
    EMP IN experiencia_laboral.CODEMPLEADO%TYPE,
    EMPRESA IN experiencia_laboral.empresa%TYPE,
    ESP IN experiencia_laboral.especialidad%TYPE,
    FECHA_INI IN experiencia_laboral.fecha_inicio%TYPE,
    FECHA_FIN IN experiencia_laboral.fecha_fin%TYPE,
    CERT IN experiencia_laboral.certificado%TYPE
) IS 
BEGIN
    INSERT INTO experiencia_laboral VALUES (CIA, SEC_EXPERIENCIA.NEXTVAL, EMP, EMPRESA, ESP, FECHA_INI, FECHA_FIN, CERT);
END;
/

-- Procedimiento para insertar PERSONAL_PROYECTOS
CREATE OR REPLACE PROCEDURE INSERTAR_PERSONAL_PROYECTO(
    CIA IN personal_proyectos.CODCIA%TYPE,
    EMP IN personal_proyectos.CODEMPLEADO%TYPE,
    PYTO IN personal_proyectos.CODPYTO%TYPE,
    CARGO IN personal_proyectos.CODCARGO%TYPE,
    AREA IN personal_proyectos.CODAREA%TYPE,
    FECHA_ASIG IN personal_proyectos.fecha_asignacion%TYPE,
    FECHA_DESASIG IN personal_proyectos.fecha_desasignacion%TYPE,
    HORAS IN personal_proyectos.horas_asignadas%TYPE,
    MONTO IN personal_proyectos.monto_asignado%TYPE,
    DOC IN personal_proyectos.documento%TYPE
) IS 
BEGIN
    INSERT INTO personal_proyectos VALUES (CIA, SEC_PERSONAL_PROYECTOS.NEXTVAL, EMP, PYTO, CARGO, AREA, FECHA_ASIG, FECHA_DESASIG, HORAS, MONTO, DOC);
END;
/

-- Procedimiento para insertar TAREAS_PERSONAL
CREATE OR REPLACE PROCEDURE INSERTAR_TAREA(
    CIA IN tareas_personal.CODCIA%TYPE,
    PYTO IN tareas_personal.CODPYTO%TYPE,
    EMP IN tareas_personal.CODEMPLEADO%TYPE,
    NOMBRE IN tareas_personal.nombre%TYPE,
    DESC_TAREA IN tareas_personal.descripcion%TYPE,
    FECHA_INI IN tareas_personal.fecha_inicio%TYPE,
    FECHA_FIN IN tareas_personal.fecha_fin%TYPE,
    ESTADO IN tareas_personal.estado%TYPE
) IS 
BEGIN
    INSERT INTO tareas_personal VALUES (CIA, SEC_TAREAS.NEXTVAL, PYTO, EMP, NOMBRE, DESC_TAREA, FECHA_INI, FECHA_FIN, ESTADO);
END;
/

-- Procedimiento para insertar EVALUACIONES_DESEMPENO
CREATE OR REPLACE PROCEDURE INSERTAR_EVALUACION(
    CIA IN evaluaciones_desempeno.CODCIA%TYPE,
    EMP IN evaluaciones_desempeno.CODEMPLEADO%TYPE,
    PYTO IN evaluaciones_desempeno.CODPYTO%TYPE,
    EVALUADOR IN evaluaciones_desempeno.evaluador_id%TYPE,
    PUNT_TOTAL IN evaluaciones_desempeno.puntuacion_total%TYPE,
    COMP_TEC IN evaluaciones_desempeno.competencias_tecnicas%TYPE,
    COMP_BLAND IN evaluaciones_desempeno.competencias_blandas%TYPE,
    CUMP_OBJ IN evaluaciones_desempeno.cumplimiento_objetivos%TYPE
) IS 
BEGIN
    INSERT INTO evaluaciones_desempeno VALUES (CIA, SEC_EVALUACIONES.NEXTVAL, EMP, PYTO, EVALUADOR, PUNT_TOTAL, COMP_TEC, COMP_BLAND, CUMP_OBJ);
END;
/

-- Procedimiento para insertar SERVICIOS_PROVEEDOR
CREATE OR REPLACE PROCEDURE INSERTAR_SERVICIO(
    CIA IN servicios_proveedor.CODCIA%TYPE,
    PROV IN servicios_proveedor.CODPROVEEDOR%TYPE,
    NOMBRE IN servicios_proveedor.nombre_servicio%TYPE,
    DESC_SERV IN servicios_proveedor.descripcion%TYPE,
    DOC IN servicios_proveedor.documento_servicio%TYPE
) IS 
BEGIN
    INSERT INTO servicios_proveedor VALUES (CIA, SEC_SERVICIOS.NEXTVAL, PROV, NOMBRE, DESC_SERV, DOC);
END;
/

-- Procedimiento para insertar CONTRATOS_PROVEEDOR
CREATE OR REPLACE PROCEDURE INSERTAR_CONTRATO(
    CIA IN contratos_proveedor.CODCIA%TYPE,
    PROV IN contratos_proveedor.CODPROVEEDOR%TYPE,
    PYTO IN contratos_proveedor.CODPYTO%TYPE,
    NUM_CONTRATO IN contratos_proveedor.numero_contrato%TYPE,
    TIPO IN contratos_proveedor.tipo_contrato%TYPE,
    FECHA_INI IN contratos_proveedor.fecha_inicio%TYPE,
    FECHA_FIN IN contratos_proveedor.fecha_fin%TYPE,
    MONTO IN contratos_proveedor.monto_total%TYPE,
    MONEDA IN contratos_proveedor.moneda%TYPE,
    DOC IN contratos_proveedor.documento_contrato%TYPE
) IS 
BEGIN
    INSERT INTO contratos_proveedor VALUES (CIA, SEC_CONTRATOS.NEXTVAL, PROV, PYTO, NUM_CONTRATO, TIPO, FECHA_INI, FECHA_FIN, MONTO, MONEDA, DOC);
END;
/

-- Procedimiento para insertar ACTIVIDADES_PROVEEDOR
CREATE OR REPLACE PROCEDURE INSERTAR_ACTIVIDAD(
    CIA IN actividades_proveedor.CODCIA%TYPE,
    PROV IN actividades_proveedor.CODPROVEEDOR%TYPE,
    PYTO IN actividades_proveedor.CODPYTO%TYPE,
    CONTRATO IN actividades_proveedor.CODCONTRATO%TYPE,
    DESC_ACT IN actividades_proveedor.descripcion%TYPE,
    FECHA IN actividades_proveedor.fecha_actividad%TYPE,
    MONTO IN actividades_proveedor.monto%TYPE,
    ESTADO IN actividades_proveedor.estado%TYPE,
    DOC IN actividades_proveedor.documento%TYPE,
    OBS IN actividades_proveedor.observaciones%TYPE
) IS 
BEGIN
    INSERT INTO actividades_proveedor VALUES (CIA, SEC_ACTIVIDADES.NEXTVAL, PROV, PYTO, CONTRATO, DESC_ACT, FECHA, MONTO, ESTADO, DOC, OBS);
END;
/

-- Procedimiento para insertar DOCUMENTOS_PROVEEDOR
CREATE OR REPLACE PROCEDURE INSERTAR_DOCUMENTO(
    CIA IN documentos_proveedor.CODCIA%TYPE,
    PROV IN documentos_proveedor.CODPROVEEDOR%TYPE,
    TIPO_DOC IN documentos_proveedor.tipo_documento%TYPE,
    NUM_DOC IN documentos_proveedor.numero_documento%TYPE,
    ARCHIVO IN documentos_proveedor.archivo%TYPE,
    TIPO_ARCH IN documentos_proveedor.tipo_archivo%TYPE,
    FECHA_EMIS IN documentos_proveedor.fecha_emision%TYPE,
    FECHA_VENC IN documentos_proveedor.fecha_vencimiento%TYPE
) IS 
BEGIN
    INSERT INTO documentos_proveedor VALUES (CIA, SEC_DOCUMENTOS.NEXTVAL, PROV, TIPO_DOC, NUM_DOC, ARCHIVO, TIPO_ARCH, FECHA_EMIS, FECHA_VENC);
END;
/

-- Procedimiento para insertar COMPROBANTE DE PAGO A PROVEEDORES
CREATE OR REPLACE PROCEDURE INSERTAR_COMPROBANTE_PROVEEDOR(
    CIA IN COMP_PAGOCAB.CodCIA%TYPE,
    PROV IN COMP_PAGOCAB.CodProveedor%TYPE,
    NUM_COMP IN COMP_PAGOCAB.NroCP%TYPE,
    PYTO IN COMP_PAGOCAB.CodPyto%TYPE,
    NROPAGO IN COMP_PAGOCAB.NroPago%TYPE,
    TCOMPPAGO IN COMP_PAGOCAB.TCompPago%TYPE,
    ECOMPPAGO IN COMP_PAGOCAB.ECompPago%TYPE,
    FECHA IN COMP_PAGOCAB.FecCP%TYPE,
    TMONEDA IN COMP_PAGOCAB.TMoneda%TYPE,
    EMONEDA IN COMP_PAGOCAB.EMoneda%TYPE,
    CAMBIO IN COMP_PAGOCAB.TipCambio%TYPE,
    IMPMO IN COMP_PAGOCAB.ImpMO%TYPE,
    IMPNETOMN IN COMP_PAGOCAB.ImpNetoMN%TYPE,
    IMPIGVMN IN COMP_PAGOCAB.ImpIGVMN%TYPE,
    IMPTOTALMN IN COMP_PAGOCAB.ImpTotalMn%TYPE,
    FOTOCP IN COMP_PAGOCAB.FotoCP%TYPE,
    FOTOABONO IN COMP_PAGOCAB.FotoAbono%TYPE,
    FECHABONO IN COMP_PAGOCAB.FecAbono%TYPE,
    DESABONO IN COMP_PAGOCAB.DesAbono%TYPE,
    SEMILLA IN COMP_PAGOCAB.Semilla%TYPE,
    TABESTADO IN COMP_PAGOCAB.TabEstado%TYPE,
    ESTADO IN COMP_PAGOCAB.CodEstado%TYPE
) IS 
BEGIN
    INSERT INTO COMP_PAGOCAB (
        CodCIA, CodProveedor, NroCP, CodPyto, NroPago, TCompPago, ECompPago, FecCP, 
        TMoneda, EMoneda, TipCambio, ImpMO, ImpNetoMN, ImpIGVMN, ImpTotalMn, 
        FotoCP, FotoAbono, FecAbono, DesAbono, Semilla, TabEstado, CodEstado
    ) 
    VALUES (
        CIA, PROV, NUM_COMP, PYTO, NROPAGO, TCOMPPAGO, ECOMPPAGO, FECHA, 
        TMONEDA, EMONEDA, CAMBIO, IMPMO, IMPNETOMN, IMPIGVMN, IMPTOTALMN, 
        FOTOCP, FOTOABONO, FECHABONO, DESABONO, SEMILLA, TABESTADO, ESTADO
    );
END;
/

-- Procedimiento para insertar COMPROBANTE DE PAGO A EMPLEADOS
CREATE OR REPLACE PROCEDURE INSERTAR_COMPROBANTE_EMPLEADO(
    CIA IN COMP_PAGOEMPLEADO.CodCIA%TYPE,
    EMP IN COMP_PAGOEMPLEADO.CodEmpleado%TYPE,
    NUM_COMP IN COMP_PAGOEMPLEADO.NroCP%TYPE,
    PYTO IN COMP_PAGOEMPLEADO.CodPyto%TYPE,
    NROPAGO IN COMP_PAGOEMPLEADO.NroPago%TYPE,
    TCOMPPAGO IN COMP_PAGOEMPLEADO.TCompPago%TYPE,
    ECOMPPAGO IN COMP_PAGOEMPLEADO.ECompPago%TYPE,
    FECHA IN COMP_PAGOEMPLEADO.FecCP%TYPE,
    TMONEDA IN COMP_PAGOEMPLEADO.TMoneda%TYPE,
    EMONEDA IN COMP_PAGOEMPLEADO.EMoneda%TYPE,
    CAMBIO IN COMP_PAGOEMPLEADO.TipCambio%TYPE,
    IMPMO IN COMP_PAGOEMPLEADO.ImpMO%TYPE,
    IMPNETOMN IN COMP_PAGOEMPLEADO.ImpNetoMN%TYPE,
    IMPIGVMN IN COMP_PAGOEMPLEADO.ImpIGVMN%TYPE,
    IMPTOTALMN IN COMP_PAGOEMPLEADO.ImpTotalMn%TYPE,
    FOTOCP IN COMP_PAGOEMPLEADO.FotoCP%TYPE,
    FOTOABONO IN COMP_PAGOEMPLEADO.FotoAbono%TYPE,
    FECHABONO IN COMP_PAGOEMPLEADO.FecAbono%TYPE,
    DESABONO IN COMP_PAGOEMPLEADO.DesAbono%TYPE,
    SEMILLA IN COMP_PAGOEMPLEADO.Semilla%TYPE,
    TABESTADO IN COMP_PAGOEMPLEADO.TabEstado%TYPE,
    ESTADO IN COMP_PAGOEMPLEADO.CodEstado%TYPE
) IS 
BEGIN
    INSERT INTO COMP_PAGOEMPLEADO (
        CodCIA, CodEmpleado, NroCP, CodPyto, NroPago, TCompPago, ECompPago, FecCP, 
        TMoneda, EMoneda, TipCambio, ImpMO, ImpNetoMN, ImpIGVMN, ImpTotalMn, 
        FotoCP, FotoAbono, FecAbono, DesAbono, Semilla, TabEstado, CodEstado
    ) 
    VALUES (
        CIA, EMP, NUM_COMP, PYTO, NROPAGO, TCOMPPAGO, ECOMPPAGO, FECHA, 
        TMONEDA, EMONEDA, CAMBIO, IMPMO, IMPNETOMN, IMPIGVMN, IMPTOTALMN, 
        FOTOCP, FOTOABONO, FECHABONO, DESABONO, SEMILLA, TABESTADO, ESTADO
    );
END;
/

-- ==================================================================
-- DATOS INICIALES
-- ==================================================================

-- Insertar datos iniciales básicos de tablas maestras
INSERT INTO TABS VALUES ('001', 'Estado Civil', 'Est_Civ', '1');
INSERT INTO TABS VALUES ('002', 'Tipo Documento', 'Tip_Doc', '1');
INSERT INTO TABS VALUES ('003', 'Monedas', 'Monedas', '1');
INSERT INTO TABS VALUES ('004', 'Tipo Comprobante', 'Tip_Comp', '1');
INSERT INTO TABS VALUES ('005', 'Grado Academico', 'Est_Comp', '1');
INSERT INTO TABS VALUES ('006', 'Tarea Personal', 'Est_Tar', '1');
INSERT INTO TABS VALUES ('007', 'Contrato Proveedor', 'Tip_Cont', '1');
INSERT INTO TABS VALUES ('008', 'Actividad Proveedor', 'Est_Act', '1');
INSERT INTO TABS VALUES ('009', 'Documento Proveedor', 'Doc_Prov', '1');
INSERT INTO TABS VALUES ('010', 'Tipo Archivo', 'Tip_Arch', '1');
INSERT INTO TABS VALUES ('011', 'Estado Proyecto', 'Est_Pyt', '1');

INSERT INTO ELEMENTOS VALUES ('001', '001', 'Soltero', 'SOL', '1');
INSERT INTO ELEMENTOS VALUES ('001', '002', 'Casado', 'CAS', '1');
INSERT INTO ELEMENTOS VALUES ('001', '003', 'Divorciado', 'DIV', '1');
INSERT INTO ELEMENTOS VALUES ('001', '004', 'Viudo', 'VIU', '1');

INSERT INTO ELEMENTOS VALUES ('002', '001', 'DNI', 'DNI', '1');
INSERT INTO ELEMENTOS VALUES ('002', '002', 'Pasaporte', 'PAS', '1');
INSERT INTO ELEMENTOS VALUES ('002', '003', 'RUC', 'RUC', '1');

INSERT INTO ELEMENTOS VALUES ('003', '001', 'Soles', 'PEN', '1');
INSERT INTO ELEMENTOS VALUES ('003', '002', 'Dólares', 'USD', '1');
INSERT INTO ELEMENTOS VALUES ('003', '003', 'Euros', 'EUR', '1');

INSERT INTO ELEMENTOS VALUES ('004', '001', 'Factura', 'Fact', '1');
INSERT INTO ELEMENTOS VALUES ('004', '002', 'Recibo por Honorarios', 'RxH', '1');
INSERT INTO ELEMENTOS VALUES ('004', '003', 'Boleta', 'Bol', '1');

INSERT INTO ELEMENTOS VALUES ('005', '001', 'Bachiller', 'BACH', '1');
INSERT INTO ELEMENTOS VALUES ('005', '002', 'Licenciatura', 'LIC', '1');
INSERT INTO ELEMENTOS VALUES ('005', '003', 'Maestría', 'MAES', '1');
INSERT INTO ELEMENTOS VALUES ('005', '004', 'Doctorado', 'DOCT', '1');
INSERT INTO ELEMENTOS VALUES ('005', '005', 'Técnico', 'TEC', '1');

INSERT INTO ELEMENTOS VALUES ('006', '001', 'Pendiente', 'PEND', '1');
INSERT INTO ELEMENTOS VALUES ('006', '002', 'En Progreso', 'ENPRO', '1');
INSERT INTO ELEMENTOS VALUES ('006', '003', 'Completada', 'COMP', '1');
INSERT INTO ELEMENTOS VALUES ('006', '004', 'Cancelada', 'CAN', '1');

INSERT INTO ELEMENTOS VALUES ('007', '001', 'Servicios', 'SERV', '1');
INSERT INTO ELEMENTOS VALUES ('007', '002', 'Suministros', 'SUMI', '1');
INSERT INTO ELEMENTOS VALUES ('007', '003', 'Obras', 'OBRA', '1');
INSERT INTO ELEMENTOS VALUES ('007', '004', 'Consultoría', 'CONS', '1');

INSERT INTO ELEMENTOS VALUES ('008', '001', 'Pendiente', 'PEND', '1');
INSERT INTO ELEMENTOS VALUES ('008', '002', 'En Progreso', 'PROG', '1');
INSERT INTO ELEMENTOS VALUES ('008', '003', 'Completada', 'COMP', '1');
INSERT INTO ELEMENTOS VALUES ('008', '004', 'Cancelada', 'CANC', '1');

INSERT INTO ELEMENTOS VALUES ('009', '001', 'RUC', 'RUC', '1');
INSERT INTO ELEMENTOS VALUES ('009', '002', 'Licencia', 'LICE', '1');
INSERT INTO ELEMENTOS VALUES ('009', '003', 'Certificación', 'CERT', '1');
INSERT INTO ELEMENTOS VALUES ('009', '004', 'Seguro', 'SEGU', '1');
INSERT INTO ELEMENTOS VALUES ('009', '005', 'Otro', 'OTRO', '1');

INSERT INTO ELEMENTOS VALUES ('010', '001', 'PDF', 'PDF', '1');
INSERT INTO ELEMENTOS VALUES ('010', '002', 'JPG', 'JPG', '1');
INSERT INTO ELEMENTOS VALUES ('010', '003', 'PNG', 'PNG', '1'); 
INSERT INTO ELEMENTOS VALUES ('010', '004', 'JPEG', 'JPEG', '1');

INSERT INTO ELEMENTOS VALUES ('011', '001', 'Planificado', 'PLAN', '1');
INSERT INTO ELEMENTOS VALUES ('011', '002', 'En Ejecución', 'EJEC', '1');
INSERT INTO ELEMENTOS VALUES ('011', '003', 'Finalizado', 'FINA', '1');
INSERT INTO ELEMENTOS VALUES ('011', '004', 'Cancelado', 'CANC', '1');

-- ==================================================================
-- ÍNDICES PARA OPTIMIZACIÓN
-- ==================================================================

CREATE INDEX idx_empleado_dni ON EMPLEADO(DNI);
CREATE INDEX idx_empleado_email ON EMPLEADO(Email);
CREATE INDEX idx_empleado_cargo ON EMPLEADO(CodCargo);
CREATE INDEX idx_empleado_vigente ON EMPLEADO(Vigente);

CREATE INDEX idx_proveedor_ruc ON PROVEEDOR(NroRuc);
CREATE INDEX idx_proveedor_vigente ON PROVEEDOR(Vigente);

CREATE INDEX idx_proyecto_jefe ON PROYECTO(EmplJefeProy);
CREATE INDEX idx_proyecto_cliente ON PROYECTO(CodCliente);
CREATE INDEX idx_proyecto_vigente ON PROYECTO(Vigente);
CREATE INDEX idx_proyecto_estado ON PROYECTO(EstPyto);

CREATE INDEX idx_comp_pago_fecha ON COMP_PAGOCAB(FecCP);
CREATE INDEX idx_comp_pago_estado ON COMP_PAGOCAB(CodEstado);
CREATE INDEX idx_comp_pago_proveedor ON COMP_PAGOCAB(CodProveedor);

CREATE INDEX idx_comp_pagoemp_fecha ON COMP_PAGOEMPLEADO(FecCP);
CREATE INDEX idx_comp_pagoemp_estado ON COMP_PAGOEMPLEADO(CodEstado);
CREATE INDEX idx_comp_pagoemp_empleado ON COMP_PAGOEMPLEADO(CodEmpleado);

CREATE INDEX idx_persona_tipo ON PERSONA(TipPersona);
CREATE INDEX idx_persona_vigente ON PERSONA(Vigente);

-- ==================================================================
-- COMENTARIOS EN TABLAS
-- ==================================================================

COMMENT ON TABLE CIA IS 'Información de la empresa u organización principal';
COMMENT ON TABLE PERSONA IS 'Entidad base para personas físicas y jurídicas';
COMMENT ON TABLE EMPLEADO IS 'Información completa del personal de la organización';
COMMENT ON TABLE PROVEEDOR IS 'Información de proveedores externos';
COMMENT ON TABLE CLIENTE IS 'Información de clientes';
COMMENT ON TABLE PROYECTO IS 'Gestión de proyectos de la organización con control financiero';
COMMENT ON TABLE COMP_PAGOCAB IS 'Comprobantes de pago - información de cabecera';
COMMENT ON TABLE COMP_PAGOEMPLEADO IS 'Comprobantes de pago de los empleados - información de cabecera';
COMMENT ON TABLE TABS IS 'Catálogos de configuración del sistema';
COMMENT ON TABLE ELEMENTOS IS 'Elementos de los catálogos de configuración';
COMMENT ON TABLE USUARIOS IS 'Usuarios del sistema con autenticación';
COMMENT ON TABLE AREAS IS 'Áreas organizacionales de la empresa';
COMMENT ON TABLE CARGOS_AREAS IS 'Cargos específicos por área organizacional';
COMMENT ON TABLE ESPECIALIDADES_PERSONAL IS 'Especialidades técnicas del personal';
COMMENT ON TABLE GRADOS_ACADEMICOS IS 'Formación académica del personal';
COMMENT ON TABLE EXPERIENCIA_LABORAL IS 'Historial laboral del personal';
COMMENT ON TABLE PERSONAL_PROYECTOS IS 'Asignación de empleados a proyectos';
COMMENT ON TABLE TAREAS_PERSONAL IS 'Tareas específicas asignadas al personal';
COMMENT ON TABLE EVALUACIONES_DESEMPENO IS 'Evaluaciones de rendimiento del personal';
COMMENT ON TABLE SERVICIOS_PROVEEDOR IS 'Catálogo de servicios ofrecidos por proveedores';
COMMENT ON TABLE CONTRATOS_PROVEEDOR IS 'Contratos establecidos con proveedores';
COMMENT ON TABLE ACTIVIDADES_PROVEEDOR IS 'Actividades realizadas por proveedores';
COMMENT ON TABLE DOCUMENTOS_PROVEEDOR IS 'Documentación legal y técnica de proveedores';

COMMIT;

-- ==================================================================
-- VERIFICACIÓN FINAL
-- ==================================================================

SELECT 'ESQUEMA CREADO EXITOSAMENTE' as MENSAJE,
       COUNT(*) as TOTAL_TABLAS
FROM user_tables 
WHERE table_name IN (
    'CIA', 'PERSONA', 'EMPLEADO', 'PROVEEDOR', 'CLIENTE', 
    'PROYECTO', 'COMP_PAGOCAB', 'COMP_PAGOEMPLEADO', 'TABS', 'ELEMENTOS',
    'USUARIOS', 'AREAS', 'CARGOS_AREAS', 'ESPECIALIDADES_PERSONAL', 
    'GRADOS_ACADEMICOS', 'EXPERIENCIA_LABORAL', 'PERSONAL_PROYECTOS', 
    'TAREAS_PERSONAL', 'EVALUACIONES_DESEMPENO', 'SERVICIOS_PROVEEDOR',
    'CONTRATOS_PROVEEDOR', 'ACTIVIDADES_PROVEEDOR', 'DOCUMENTOS_PROVEEDOR'
);

SELECT 'SECUENCIAS CREADAS: ' || COUNT(*) as SECUENCIAS
FROM user_sequences 
WHERE sequence_name LIKE 'SEC_%';

SELECT 'PROCEDIMIENTOS CREADOS: ' || COUNT(*) as PROCEDIMIENTOS
FROM user_procedures 
WHERE object_name LIKE 'INSERTAR_%';

SELECT 'FUNCIONES CREADAS: ' || COUNT(*) as FUNCIONES
FROM user_objects 
WHERE object_type = 'FUNCTION' 
AND object_name IN ('DURACION_PROYECTO', 'GET_PERSONA_TIPO');